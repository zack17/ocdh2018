(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{51:function(e,n,a){e.exports=a(75)},64:function(e,n,a){},66:function(e,n,a){},75:function(e,n,a){"use strict";a.r(n);var t=a(0),r=a.n(t),c=a(34),o=a.n(c),i=a(81),s=a(46),u=a(9),l=(a(64),a(40)),m=a(41),d=a(47),b=a(42),f=a(48),g=a(80),y=(a(66),a(21)),v=a(8),h=a(7),j=a.n(h);function E(){var e=Object(v.a)(["\n  fragment ObjectDetailsFragment on Object {\n    id\n    yearfrom\n    yearto\n    description\n    classification {\n      id\n      name\n    }\n    origin {\n      id\n      name\n    }\n    producer {\n      id\n      name\n    }\n    picture {\n      handle\n    }\n  }\n"]);return E=function(){return e},e}var p=j()(E()),k="where: { id_not: $id, yearfrom_lte: $yearTo, yearto_gte: $yearFrom }",w="where: { id_not: $id, classification: { objects_some: { id: $id } } }",N="where: { id_not: $id, producer: { objects_some: { id: $id } } }",$="where: {\n    id_not: $id\n    classification: { objects_some: { id: $id } }\n    producer: { objects_some: { id: $id } }\n  }",O="where: {\n    id_not: $id\n    yearfrom_lte: $yearTo\n    yearto_gte: $yearFrom\n    classification: { objects_some: { id: $id } }\n  }",C="where: {\n    id_not: $id\n    yearfrom_lte: $yearTo\n    yearto_gte: $yearFrom\n    producer: { objects_some: { id: $id } }\n  }";function I(){return r.a.createElement("div",{className:"sk-cube-grid"},r.a.createElement("div",{className:"sk-cube sk-cube1"}),r.a.createElement("div",{className:"sk-cube sk-cube2"}),r.a.createElement("div",{className:"sk-cube sk-cube3"}),r.a.createElement("div",{className:"sk-cube sk-cube4"}),r.a.createElement("div",{className:"sk-cube sk-cube5"}),r.a.createElement("div",{className:"sk-cube sk-cube6"}),r.a.createElement("div",{className:"sk-cube sk-cube7"}),r.a.createElement("div",{className:"sk-cube sk-cube8"}),r.a.createElement("div",{className:"sk-cube sk-cube9"}))}function _(e){return r.a.createElement("h2",{className:"error"},"Oh no, something went terribly wrong :(")}var A=a(49);function Y(e){return Math.random()*e|0}var D=a(79);function P(e){var n=e.object,a=encodeURIComponent(n.id);return r.a.createElement("div",{className:"col-md-6 col-sm-12 mb-4 col-lg-3"},r.a.createElement("div",{className:"card"},r.a.createElement(D.a,{className:"object-card",to:"/objects/".concat(a)},r.a.createElement("img",{className:"card-img-top",src:"https://media.graphcms.com/resize=width:500,height:500,fit:crop,align:center/compress/".concat(n.picture.handle),alt:n.classification.name,title:n.description})),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},n.classification.name),r.a.createElement("p",{className:"card-text"},r.a.createElement("small",{className:"text-muted"},"Dateperiod: ",n.yearfrom," - ",n.yearto," ",r.a.createElement("br",null),"Origin: ",n.origin?n.origin.name:"Unknown"," ",r.a.createElement("br",null),"Producer: ",n.producer?n.producer.name:"Unknown")),r.a.createElement(D.a,{className:"btn btn-primary",to:"/objects/".concat(a)},"Show similar objects"))))}function q(){var e=Object(v.a)(["query SimilarObjects(",") {\n    objects(skip: $skip, first: 1, ",") {\n      ...ObjectDetailsFragment\n    }\n  }\n  ",""]);return q=function(){return e},e}function F(e){var n=e.to,a=function(e,n,a){var t,r=!1;switch(e){case"year":r=!0,t=k;break;case"producer":t=N;break;case"classification":t=w;break;case"producerAndYear":r=!0,t=C;break;case"classificationAndYear":r=!0,t=O;break;case"classificationAndProducer":t=$;break;default:throw new _("Unknown criteria ".concat(e))}var c="$skip: Int!, $id: ID!",o={id:n.id,skip:Y(a)};return r&&(o=Object(A.a)({},o,{yearFrom:n.yearfrom,yearTo:n.yearto}),c+="$yearFrom: Int!, $yearTo: Int!"),{query:j()(q(),c,t,p),variables:o}}(e.criteria,n,e.count),t=a.query,c=a.variables;return r.a.createElement(u.Query,{query:t,variables:c},function(e){var n=e.loading,a=e.error,t=e.data;return n?r.a.createElement(I,null):a?r.a.createElement(_,{error:a}):r.a.createElement(P,{object:t.objects[0]})})}function x(){var e=Object(v.a)(["\n              query RandomObject($skip: Int) {\n                objects(skip: $skip, first: 1) {\n                  ...ObjectDetailsFragment\n                }\n              }\n              ","\n            "]);return x=function(){return e},e}function J(){var e=Object(v.a)(["\n        {\n          objectsConnection {\n            aggregate {\n              count\n            }\n          }\n        }\n      "]);return J=function(){return e},e}function Q(e){return r.a.createElement(u.Query,{query:j()(J())},function(e){var n=e.loading,a=e.error,t=e.data;return n?r.a.createElement(I,null):a?r.a.createElement(_,{error:a}):r.a.createElement(u.Query,{query:j()(x(),p),variables:{skip:Y(t.objectsConnection.aggregate.count)}},function(e){var n=e.loading,a=e.error,t=e.data;return n?r.a.createElement(I,null):a?r.a.createElement(_,{error:a}):r.a.createElement(P,{object:t.objects[0]})})})}function T(){var e=Object(v.a)(["\n    query RelationCounts($id: ID!, $yearFrom: Int!, $yearTo: Int!) {\n      sameYear: objectsConnection(\n        ","\n      ) {\n        aggregate {\n          count\n        }\n      }\n\n      sameClassification: objectsConnection(\n        ","\n      ) {\n        aggregate {\n          count\n        }\n      }\n\n      sameProducer: objectsConnection(\n        ","\n      ) {\n        aggregate {\n          count\n        }\n      }\n\n      sameClassificationAndProducer: objectsConnection(\n        ","\n      ) {\n        aggregate {\n          count\n        }\n      }\n\n      sameClassificationAndYear: objectsConnection(\n        ","\n      ) {\n        aggregate {\n          count\n        }\n      }\n\n      sameProducerAndYear: objectsConnection(\n        ","\n      ) {\n        aggregate {\n          count\n        }\n      }\n    }\n  "]);return T=function(){return e},e}function z(e){var n=Math.random()*e.length|0,a=e.splice(n,1);return Object(y.a)(a,1)[0]}function M(e){var n=e.to,a=j()(T(),k,w,N,$,O,C);return r.a.createElement(u.Query,{query:a,variables:{id:n.id,yearFrom:n.yearfrom,yearTo:n.yearto}},function(e){var a=e.loading,t=e.error,c=e.data;if(a)return r.a.createElement(I,null);if(t)return r.a.createElement(_,{error:t});var o=[{criteria:"producerAndYear",count:c.sameProducerAndYear.aggregate.count},{criteria:"classificationAndYear",count:c.sameClassificationAndYear.aggregate.count},{criteria:"classificationAndProducer",count:c.sameClassificationAndProducer.aggregate.count}],i=[{criteria:"producer",count:c.sameProducer.aggregate.count},{criteria:"classification",count:c.sameClassification.aggregate.count},{criteria:"year",count:c.sameYear.aggregate.count}],s=o.filter(function(e){return e.count>0}),u=i.filter(function(e){return e.count>0}),l=[r.a.createElement(Q,{key:"random"})];if(s.length>0){var m=z(s),d=m.criteria,b=m.count;l.push(r.a.createElement(F,{to:n,criteria:d,key:d,count:b}))}else if(u.length>0){var f=z(u),g=f.criteria,y=f.count;l.push(r.a.createElement(F,{to:n,criteria:g,key:g,count:y}))}else l.push(r.a.createElement(Q,{key:"random1"}));if(u.length>0){var v=z(u),h=v.criteria,j=v.count;l.push(r.a.createElement(F,{to:n,criteria:h,key:h,count:j}))}else l.push(r.a.createElement(Q,{key:"random2"}));return function(e){for(var n=e.length-1;n>0;n--){var a=Math.floor(Math.random()*(n+1)),t=[e[a],e[n]];e[n]=t[0],e[a]=t[1]}}(l),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement(P,{object:n}),l))})}function R(){var e=Object(v.a)(["\n      {\n        objects(first: 1) {\n          ...ObjectDetailsFragment\n        }\n      }\n      ","\n    "]);return R=function(){return e},e}function B(){var e=Object(v.a)(["\n      query QueryObjectById($id: ID!) {\n        objects(first: 1, where: { id: $id }) {\n          ...ObjectDetailsFragment\n        }\n      }\n      ","\n    "]);return B=function(){return e},e}function U(e){var n,a=e.match.params.objectId;return n=a?j()(B(),p):j()(R(),p),r.a.createElement(u.Query,{query:n,variables:{id:a}},function(e){var n=e.loading,a=e.error,t=e.data;if(n)return r.a.createElement(I,null);if(a)return r.a.createElement(_,{error:a});var c=Object(y.a)(t.objects,1)[0];return r.a.createElement(M,{to:c})})}var Z=a(43),L=a.n(Z),S=function(e){function n(){return Object(l.a)(this,n),Object(d.a)(this,Object(b.a)(n).apply(this,arguments))}return Object(f.a)(n,e),Object(m.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"App container"},r.a.createElement("nav",{className:"navbar navbar-dark bg-dark"},r.a.createElement(L.a,{className:"navbar-brand",to:"/"},"Artify")),r.a.createElement("main",{className:" mt-4 mb-4",style:{minHeight:"420px"}},r.a.createElement(g.a,{path:"/",exact:!0,component:U}),r.a.createElement(g.a,{path:"/objects/:objectId",exact:!0,component:U})),r.a.createElement("footer",null,r.a.createElement("small",{className:"text-muted"},"Artify is a Project created at the 4th Swiss Open Cultural Data Hackathon in Zurich 2018")))}}]),n}(t.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=new s.a({uri:"https://api-euwest.graphcms.com/v1/cjnr7i2yb0bje01glv5s68dio/master",headers:{Authorization:"Bearer ".concat("eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ2ZXJzaW9uIjoxLCJ0b2tlbklkIjoiMjY1MDAyNTctYTYwZi00ZmI0LThmZTYtYmJhNDQxMWQzNzBlIn0.5PRq6zu9QhwPQxR1G_qLSj0PDzeozd0xR_GHDv3M1m0")}});console.log("/ocdh2018"),o.a.render(r.a.createElement(u.ApolloProvider,{client:W},r.a.createElement(i.a,{basename:"/ocdh2018"},r.a.createElement(S,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[51,2,1]]]);
//# sourceMappingURL=main.56faed37.chunk.js.map